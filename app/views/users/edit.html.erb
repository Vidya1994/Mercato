<div class="section">
  <div class="form">
      <h3>Edit Profile</h3>

      <%= form_for @user, url: '/users/edit.json', html: {id: "formEditProfile"}, remote: true do |f| %>
        <div class='row'>
          <div class='col s12' id="divUpdateErrorMessage">
          </div>
        </div>

        <div class='row'>
          <div class='input-field col s12'>
            <%= f.text_field :first_name, class: "validate" %>
            <label for='session_first_name'>First name</label>
          </div>
        </div>

        <div class='row'>
          <div class='input-field col s12'>
            <%= f.text_field :last_name, class: "validate" %>
            <label for='session_last_name'>Last name</label>
          </div>
        </div>

        <div class='row'>
          <div class='input-field col s12'>
            <%= f.email_field :email_id, class: "validate" %>
            <label for='session_email_id'>Email ID</label>
          </div>
        </div>

        <div class='row'>
          <div class='input-field col s12'>
            <%= f.password_field :password, class: "validate" %>
            <label for='session_password'>Password</label>
          </div>
        </div>
        <br />
        <center>
          <div class='row'>
            <button type='submit' name='commit' class='col s12 btn btn-large waves-effect'>Update</button>
          </div>
        </center>
      <% end %>
  </div>
  <div class="errors">
    <p style="color:red"><%= @error_message %></p>
  </div>
</div>

<div class="divider"></div>
<div class="section">
  <h3>Address Book</h3>
  <div class="row">
    <% @user_data["addresses"].each do |address| %>
    <div class="col s12 m6">
      <div class="card blue-grey darken-1">
        <div class="card-content white-text">
          <span class="card-title">Address <%= address["address_id"] %></span>
          <p>
            <%= address["street"] %>
          </p>
          <p>
            <%= address["city"] %>, <%= address["tax_details"]["state"] %> <%= address["zipcode"] %>
          </p>
          <p>
            <%= address["phone"] %>
          </p>
        </div>
        <div class="card-action">
          <a href="#">Edit</a>
          <a href="#">Delete</a>
        </div>
      </div>
    </div>
    <% end %>
  </div>
</div>
<div class="divider"></div>
<div class="section">
  <h3>Cards</h3>
  <div class="row">
    <% @user_data["card_details"].each do |card| %>
    <div class="col s12 m6">
      <div class="card blue-grey darken-1">
        <div class="card-content white-text">
          <span class="card-title"><%= card["card_number"][0..3] %>-XXXX-XXXX-<%= card["card_number"][12..15] %></span>
          <p>
            <%= card["name_on_card"] %>
          </p>
          <p>
            <%= card["expiry_date"] %>
          </p>
        </div>
        <div class="card-action">
          <a href="#">Edit</a>
          <a href="#">Delete</a>
        </div>
      </div>
    </div>
    <% end %>
  </div>
</div>
